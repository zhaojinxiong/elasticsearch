## 先设计搞个用户表_ 角色表

``` 
    （与用户行为相关的属性）
    1. tb_user { 
        id                (int), 
        name              (varchar),
        email             (varchar),
        phone_number      (varchar),
        password          (varchar),
        status            (int),
        create_time       (datetime),
        last_login_time   (datetime),
        last_update_time  (datetime),
        avatar            (varchar) 
    }; 

    (角色表)
    2. tb_role {
         id               (int),
         user_id          (int),
         name             (varchar)
        } 
    (房屋信息)
    3. tb_house {
        id                    (int),
        title                 (varchar),
        price                 (int),  
        area                  (int),
        room                  (int),
        floor                 (int),
        total_floor           (int),   
        watch_times           (int),  
        build_year            (int),   
        status                (int),
        create_time           (datetime),
        last_update_time      (datetime),    
        city_en_name          (varchar),
        region_en_name        (varchar),  
        cover                 (varchar),
        direction             (int),
        distance_to_subway    (int),  
        parhour               (int), 
        district              (district), 
        admin_id              (int)  
        bathroom              (int) 
        street                (varchar)
    }
   （房屋图片）
    4.house_picture {
        id                (int)
        house_id          (int)
        cdn_prefix        (varchar)
        width             (int)
        height            (int)
        loaction          (varchar)
        path              (varchar)   
    }
   （房屋细节）
    5.house_detall {
        id                 (int),
        description        (varchar)
        layout_desc        (varchar)
        traffic            (varchar)
        round_service      (varchar)
        rent_way           (int)
        address            (varchar)
        subway_line_id     (int)
        subway_line_name   (int)
        subway_station_id  (int)
        subway_station_name(varvchar)
        house_id           (int) 
    }
   （房屋预约）
    6.house_subscribe {
        id                 (int)
        house_id           (int)
        user_id            (int)
        desc               (varchar)
        status             (int)
        create_time        (datetime)
        last_update_time   (datetime)
        admin_id           (int)
    }
   （房屋标签）
    7.house_tag {
        house_id          (int)
        id                (int)
        name              (varchar)
    }
    8. support_address {
        id                (int)
        belong_to         (varchar)
        cn_name           (varchar)
        level             (varchar)
        map_lng           (doubule)
        map_lat           (doubule)
    }
    9. subway {
        id                 (int),
        name               (varchar)
        city_en_name       (varchar)
    }
    10.subway_station{
        id                 (int),
        subway_id          (int)
        name               (varchar)
    }
```


### 表结构设计原则
    + 数据聚合原则 （以实体数据为基准 以该实体的基本单位 设计表结构 ）
    + 慎用 数据库特性 （比如说外键）
    + 减少中间表的设计 （过渡设计， 无法横向切分）

## 商品模块数据库设计
> SPU = Standard Product Unit （标准化产品单元） 
    + SPU是商品信息聚合的最小单位，是一组可复用、易检索的标准化信息的集合，该集合描述了一个产品的特性。通俗点讲，属性值、特性相同的商品就可以称为一个SPU。
> SKU=stock keeping unit(库存量单位)
    + SKU即库存进出计量的单位， 可以是以件、盒、托盘等为单位。在服装、鞋类商品中使用最多最普遍。 例如纺织品中一个SKU通常表示：规格、颜色、款式。
> SPU是标准化产品单元，区分品种；SKU是库存量单位，区分单品；商品特指与商家有关的商品，可对应多个SKU。
> ARPU=Average Revenue Per User(每用户平均收入)
    + ARPU注重的是一个时间段内运营商从每个用户所得到的利润。因此，高端的用户越多，ARPU越高。在这个时间段里，从运营商的运营情况来看，ARPU值高说明利润高，这段时间效益好。


例如，iphone4就是一个SPU，N97也是一个SPU，这个与商家无关，与颜色、款式、套餐也无关
1. 同一商品不同SKU 库存和售价不同。
2. 不同类型的商品具有不同的属性名和属性值（如汽车和服饰）,所以属性需要支持后期添加和维护。
3. 商家某件商品的销量统计,改件商品内几个不同的SKU的销量统计。

分类表(tb_category) { 商品分类编号（id）, 分类名称(name)，父分类编号(pidnumber) }

商品表(tb_product) { 商品编号（id）, 商品名称(name), 卖家编号(seller_id), SPU销量(spu_count), 评论数(comment) }


SKU表 （库存表）:{SKU编号（id）, 商品编号(product_id), SKU属性(attribute), 价格(price), 库存(stock), SKU销量（sales_volume}
(1, 1, [1:1,2:3], 99, 400, 0) 其中 [1:1,2:3] 表示 "颜色为黑色,尺码为X"


属性名(tb_attribute_name) { 属性名编号(id), 属性名（name）， 商品分类编号（product_category_id）, 父属性编号（pid） }
(3, 品牌, 2, 0)

属性值(tb_attribute_value) { 属性值编号(id),属性值(name), 属性名编号(attribute_name_id)) }
(5, 七匹狼, 3)

商品和属性关系表(tb_rel_pro_attr):{ 自增编号(id), 商品编号(product) , 属性名编号(attr_name) , 属性值编号(attr_value) }
(1, 1, 1, 1) 商品1颜色为黑色
(2, 1, 1, 2) 商品1颜色为白色
(3, 1, 2, 3) 商品1尺码为X
(4, 1, 2, 4) 商品1尺码为XL

